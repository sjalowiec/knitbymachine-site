---
import Layout from "../layouts/layout.astro";
import "../styles/temphome.css";
;
---

<Layout>
  <!-- DEBUG BANNER - TEMPORARY -->
  <div id="debug-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background: #ff0000; color: white; padding: 12px; font-family: monospace; font-size: 14px; z-index: 9999; text-align: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.3);">
    <div id="debug-info">Loading debug info...</div>
  </div>
  
  <script is:inline>
    function updateDebugInfo() {
      const width = window.innerWidth;
      const isMobile = width <= 768;
      const textBase = getComputedStyle(document.documentElement).getPropertyValue('--text-base').trim();
      const bodyFontSize = getComputedStyle(document.body).fontSize;
      
      const debugEl = document.getElementById('debug-info');
      if (debugEl) {
        debugEl.innerHTML = `
          <strong>VIEWPORT: ${width}px</strong> | 
          Mobile Mode: ${isMobile ? 'YES ✓' : 'NO ✗'} | 
          --text-base: ${textBase || 'UNDEFINED!'} | 
          Body font-size: ${bodyFontSize}
        `;
      }
    }
    
    // Update on load and resize
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', updateDebugInfo);
    } else {
      updateDebugInfo();
    }
    window.addEventListener('resize', updateDebugInfo);
  </script>
  
  <section class="kbm-hero">
    <div class="kbm-hero-content">
      <h1>
        <span class="line">Modern tools to make your</span>
        <span class="line click-line">
          machine knitting <span class="click-word">CLICK</span>
          <span class="click-icon" aria-hidden="true">
            <svg viewBox="0 0 189.6 190.1" xmlns="http://www.w3.org/2000/svg">
              <path fill="white" stroke="#52682d" stroke-width="3"
                d="M127.4,60.3c-2.1,1.2-3.7,2.9-4.9,4.8-4.3-5.3-12-6.9-18.1-3.3
                -2.1,1.2-3.7,2.9-4.9,4.8-4.3-5.3-12-6.9-18.1-3.3
                -2,1.2-3.6,2.8-4.8,4.6L51.7,40.3c-3.9-6.8-12.6-9.1-19.4-5.2
                -6.8,3.9-9.1,12.6-5.2,19.4l28.6,49.6c-2.2-1.4-4.5-2.7-6.8-3.9
                l-2.4-1.2c-4.4-2.3-9.5-2.3-13.8.2-2.3,1.3-4.1,3.2-5.4,5.5
                -1.8,3.3-2.2,7.2-1.1,10.8c1.1,3.6,3.5,6.6,6.9,8.4
                9.9,5.3,18.7,12.4,26.1,20.9l22.7,26.2c11.2,13,30.1,16.1,44.9,7.6
                l26.3-15.2c17.1-9.9,22.9-31.8,13.1-48.8l-28.3-49
                c-3.9-6.8-12.6-9.1-19.4-5.2Z"/>
            </svg>
          </span>
        </span>
      </h1>

      <p>Spend less time struggling and more time knitting</p>

      <div class="early-access">
        <p>
          Knit by Machine is in early access. You’re getting a first look at the new tools,
          patterns, and workshops we’re building to make your machine knitting easier and more enjoyable.
        </p>


        <form id="_form_1_" method="POST" action="#">
          <h2 class="_form-title">Be part of something new</h2>

          <label class="_form-label" for="fullname">Full Name</label>
          <input id="fullname" name="fullname" type="text" placeholder="Your name" />

          <label class="_form-label" for="email">
            Email <span style="color:var(--kbm-green-2)">*</span>
          </label>
          <input id="email" name="email" type="email" placeholder="Your email address" required />

          <button class="_submit" type="submit">Get Early Access</button>

          <div class="_form-thank-you">
            <p>
              Thank you for joining <strong>Knit by Machine Early Access!</strong><br />
              You’ll receive your invitation soon.
            </p>
          </div>
        </form>
      </div>

        <div class="discussion-section">
          <button class="discussion-toggle" onclick="toggleDiscussion()">
            <i class="fa-regular fa-comments"></i>
            Help Shape Knit by Machine
            <span class="toggle-arrow">▼</span>
          </button>

          <div id="discussion" class="discussion-content">
            <script async src="https://talk.hyvor.com/embed/embed.js" type="module"></script>
            <hyvor-talk-comments website-id="14320" page-id="pre-release-home"></hyvor-talk-comments>
          </div>
        </div>
    </div>
  </section>

  <script is:inline>
    function toggleDiscussion() {
      const content = document.getElementById("discussion");
      const arrow = document.querySelector(".toggle-arrow");
      const isVisible = content.classList.contains("show");
      content.classList.toggle("show", !isVisible);
      arrow.classList.toggle("open", !isVisible);
    }
  </script>
</Layout>
